var MessageController=["$scope","progressbar","Message",function(n,t,i){return n.$parent.title="Message Boards",n.$parent.showBanner=!1,n.entity={},n.$watch("User",function(){if(n.User)return n.entity.Author=n.User.UserName,n.entity.Email=n.User.Email,n.entity.Url=n.User.Url,n.AuthorForDisplay=n.User.UserName,n.editmode=n.User.UserName===""||!(n.User.UserName!=null)}),n.loading="Loading",n.list=i.query({$filter:"IsDeleted eq false"},function(){var t,i,u,r;for(r=n.list.value,i=0,u=r.length;i<u;i++)t=r[i],t.Gravatar=t.Email?"http://www.gravatar.com/avatar/"+md5(t.Email):"/Content/img/avatar.png";return n.loading=""}),n.save=function(){return t.start(),n.submitting=!0,n.entity.BoardId=UUID.generate(),i.save(n.entity,function(i){return message.success("Message has been submitted."),n.list.value.unshift(i),n.entity.Content="",n.AuthorForDisplay=i.Author,n.editmode=!1,angular.resetForm(n,"form"),n.submitting=!1,t.complete()})},n.remove=function(n){return i.remove({id:"(guid'"+n.BoardId+"')"},function(){return n.IsDeleted=!0,message.success("Message has been removed.")})}}]