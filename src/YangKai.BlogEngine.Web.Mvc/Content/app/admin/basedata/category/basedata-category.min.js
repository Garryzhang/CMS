angular.module("admin-basedata-category",[]).config(["$routeProvider",function(n){return n.when("/channel(':channel')/group(':group')/category",{templateUrl:"/content/app/admin/basedata/category/basedata-category.tpl.html",controller:"CategoryCtrl"})}]).controller("CategoryCtrl",["$scope","$dialog","$routeParams","Category","Group",function(n,t,i,r,u){var f;return u.query({$filter:"Url eq '"+i.group+"'",$expand:"Channel"},function(t){return n.group=t.value[0]}),f=function(){return r.query({$filter:"IsDeleted eq false and Group/Url eq '"+i.group+"'"},function(t){return n.list=t})},n.add=function(){return n.entity={},n.editDialog=!0},n.edit=function(t){return n.entity=angular.copy(t),n.editDialog=!0},n.save=function(){return n.entity.Group=n.group,n.entity.CategoryId?r.edit({id:"(guid'"+n.entity.CategoryId+"')"},n.entity,function(){return message.success("Edit category successfully."),n.close(),f()}):(n.entity.CategoryId=UUID.generate(),r.save(n.entity,function(){return message.success("Add category successfully."),n.close(),f()}))},n.remove=function(n){return message.confirm(function(){return n.IsDeleted=!0,r.edit({id:"(guid'"+n.CategoryId+"')"},n,function(){return message.success("Delete category successfully."),f()})})},n.close=function(){return n.editDialog=!1},f()}])