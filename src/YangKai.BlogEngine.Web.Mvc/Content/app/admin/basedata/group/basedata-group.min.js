angular.module("admin-basedata-group",[]).config(["$routeProvider",function(n){return n.when("/channel(':channel')/group",{templateUrl:"/content/app/admin/basedata/group/basedata-group.tpl.html",controller:"GroupCtrl"})}]).controller("GroupCtrl",["$scope","$dialog","$routeParams","Group","Channel",function(n,t,i,r,u){var f;return u.query({$filter:"Url eq '"+i.channel+"'"},function(t){return n.channel=t.value[0]}),n.entity={},f=function(){return n.loading="Loading",r.query({$filter:"IsDeleted eq false and Channel/Url eq '"+i.channel+"'"},function(t){return n.list=t,n.loading=""})},n.add=function(){return n.entity={},n.editDialog=!0},n.edit=function(t){return n.entity=angular.copy(t),n.editDialog=!0},n.save=function(){return n.loading="Saving",n.entity.Channel=n.channel,n.entity.GroupId?r.edit({id:"(guid'"+n.entity.GroupId+"')"},n.entity,function(){return message.success("Edit group successfully."),n.close(),f()}):(n.entity.GroupId=UUID.generate(),r.save(n.entity,function(){return message.success("Add group successfully."),n.close(),f()}))},n.remove=function(t){return n.loading="Deleting",t.Channel=n.channel,message.confirm(function(){return t.IsDeleted=!0,r.edit({id:"(guid'"+t.GroupId+"')"},t,function(){return message.success("Delete group successfully."),f()})})},n.close=function(){return n.editDialog=!1},f()}])