angular.module("issue",["IssueServices"]).config(["$routeProvider",function(n){return n.when("/issue",{templateUrl:"/content/app/issue/issue.tpl.html",controller:"IssueCtrl"})}]).controller("IssueCtrl",["$scope","$routeParams","$location","Issue",function(n,t,i,r){return n.$parent.title="Issues",n.$parent.showBanner=!1,n.projects=["API Portal","API Framework","ServiceStack.Text","Framework API/ API SDK","Oversea WCF Framework","Framework Tools","Auth Service","Gateway","Oversea Data Access","Cassandra Adapter","Document Tool","Common API","API Notify","Newegg Central Framework","HR Tools"].sort(),n.get=function(){return r.query(function(t){var i,r,u,f,e,o,s,h,v,y,l,a,c;for(l=t.value,s=0,v=l.length;s<v;s++)i=l[s],i.CreateDate=moment(i.CreateDate).fromNow();for(n.list=t.value,f={},u={},e={},a=n.list,h=0,y=a.length;h<y;h++)i=a[h],f[i.Statu]||(f[i.Statu]=0),f[i.Statu]++,u[i.Project]||(u[i.Project]=0),u[i.Project]++,e[i.Author]||(e[i.Author]=0),e[i.Author]++;n.statu=[];for(r in f)o=f[r],f.hasOwnProperty(r)&&n.statu.push({key:r,value:o});n.project=[];for(r in u)o=u[r],u.hasOwnProperty(r)&&n.project.push({key:r,value:o});n.user=[],c=[];for(r in e)o=e[r],e.hasOwnProperty(r)?c.push(n.user.push({key:r,value:o})):c.push(void 0);return c})},n.add=function(){return n.entity={},n.editDialog=!0},n.save=function(){var t;return n.loading="save",t=n.entity,t.IssueId=UUID.generate(),t.Statu="Open",r.update({id:"(guid'"+t.IssueId+"')"},t,function(){return message.success("Create issue successfully."),n.editDialog=!1,n.loading="",n.get()})},n.handle=function(){},n.get()}])