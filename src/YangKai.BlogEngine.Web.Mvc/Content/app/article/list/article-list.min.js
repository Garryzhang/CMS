angular.module("article-list",["resource.articles","ChannelServices"]).config(["$routeProvider",function(n){return n.when("/",{templateUrl:"/Content/app/article/list/article-list.tpl.html",controller:"ArticleListCtrl",resolve:{articles:["$rootScope","$route","$q","Article","channel",function(n,t,i,r,u){var f;return f=i.defer(),u.getdefault().then(function(n){var i;return r.queryOnce({$filter:"IsDeleted eq false \nand Group/Channel/Url eq '"+n.Url+"' ",$skip:((i=t.current.params.p)!=null?i:1)*10-10},function(n){return f.resolve(n)})}),f.promise}]}}).when("/list/:channel/:group/tag/:tag",{templateUrl:"/Content/app/article/list/article-list.tpl.html",controller:"ArticleListCtrl",resolve:{articles:["$route","$q","Article",function(n,t,i){var r,u;return r=t.defer(),i.queryOnce({$filter:"IsDeleted eq false \nand Group/Channel/Url eq '"+n.current.params.channel+"' \nand Tags/any(tag:tag/Name eq '"+n.current.params.tag+"')",$skip:((u=n.current.params.p)!=null?u:1)*10-10},function(n){return r.resolve(n)}),r.promise}]}}).when("/list/:channel/:group",{templateUrl:"/Content/app/article/list/article-list.tpl.html",controller:"ArticleListCtrl",resolve:{articles:["$route","$q","Article",function(n,t,i){var r,u;return r=t.defer(),i.queryOnce({$filter:"IsDeleted eq false \nand Group/Channel/Url eq '"+n.current.params.channel+"' \nand Group/Url eq '"+n.current.params.group+"'",$skip:((u=n.current.params.p)!=null?u:1)*10-10},function(n){return r.resolve(n)}),r.promise}]}}).when("/list/:channel",{templateUrl:"/Content/app/article/list/article-list.tpl.html",controller:"ArticleListCtrl",resolve:{articles:["$route","$q","Article",function(n,t,i){var r,u;return r=t.defer(),i.queryOnce({$filter:"IsDeleted eq false \nand Group/Channel/Url eq '"+n.current.params.channel+"'",$skip:((u=n.current.params.p)!=null?u:1)*10-10},function(n){return r.resolve(n)}),r.promise}]}}).when("/search/:key",{templateUrl:"/Content/app/article/list/article-list.tpl.html",controller:"ArticleListCtrl",resolve:{articles:["$route","$q","Article",function(n,t,i){var r,u;return r=t.defer(),i.queryOnce({$filter:"IsDeleted eq false \nand indexof(Title, '"+n.current.params.key+"') gt -1",$skip:((u=n.current.params.p)!=null?u:1)*10-10},function(n){return r.resolve(n)}),r.promise}]}})}]).controller("ArticleListCtrl",["$scope","$rootScope","$window","$routeParams","$location","articles","channel",function(n,t,i,r,u,f,e){var o,s,h;return i.scroll(0,0),t.title=(o=(s=r.tag)!=null?s:r.group)!=null?o:r.channel,t.title||(n.key?t.title="Search Result: '"+n.key+"'":e.getdefault().then(function(n){return t.title=n.Name})),n.list=f,n.currentPage=(h=r.p)!=null?h:1,n.params=r,n.setPage=function(n){return u.search({p:n})},n.edit=function(n){return i.location.href="/admin/article('"+n.PostId+"')"}}])