angular.module("article-archives",["resource.articles"]).config(["$routeProvider",function(n){return n.when("/archives",{templateUrl:"/Content/app/article/archives/article-archives.tpl.html",controller:"ArticleArchivesCtrl",resolve:{archives:["$q","Channel",function(n,t){var i;return i=n.defer(),t.queryOnce({$select:"Name,Url,Groups/Name,Groups/Url,Groups/IsDeleted,Groups/Posts/Title,Groups/Posts/Url,Groups/Posts/PubDate,Groups/Posts/IsDeleted",$expand:"Groups/Posts",$filter:"IsDeleted eq false"},function(n){var u,f,e,o,t,r,l,p,s,h,c,w,b,k,a,v,y;for(t={},a=n.value,s=0,w=a.length;s<w;s++)if(u=a[s],!u.IsDeleted)for(v=u.Groups,h=0,b=v.length;h<b;h++)if(e=v[h],!e.IsDeleted)for(y=e.Posts,c=0,k=y.length;c<k;c++)(r=y[c],r.IsDeleted)||(f=moment(r.PubDate).format("YYYY-MM"),t[f]||(t[f]=[]),r.group=e.Name,r.channel=u.Name,t[f].push(r));l=[];for(o in t)p=t[o],t.hasOwnProperty(o)&&l.push({date:o,posts:p});return i.resolve(l)}),i.promise}]}})}]).controller("ArticleArchivesCtrl",["$scope","$translate","archives",function(n,t,i){return n.$parent.title="Archives",n.$parent.showBanner=!1,n.list=i}])