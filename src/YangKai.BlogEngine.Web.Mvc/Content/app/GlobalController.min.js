angular.module("ctrl.main",["resource.channels","resource.users"]).controller("GlobalController",["$scope","$http","$location","$window","Channel","account",function(n,t,i,r,u,f){return f.get().then(function(t){return n.User=t}),u.query({$orderby:"OrderId",$filter:"IsDeleted eq false",$expand:"Groups",$select:"Name,Url,Groups/Name,Groups/Url,Groups/IsDeleted,Groups/OrderId"},function(t){return n.Channels=t.value}),n.search=function(){return i.path("/search/"+n.key)},n.GoHome=function(){return r.location.href="/"}}]).controller("LoginController",["$scope","$window","User",function(n,t,i){return n.open=function(){return t.location.href="/admin/"},n.signin=function(){return n.submitting=!0,i.signin({id:"(1)"},n.user,function(){return n.submitting=!1,t.location.href="/admin/"},function(t){return n.error=t.data["odata.error"].innererror.message,n.user.Password="",n.submitting=!1})},n.signout=function(){return n.submitting=!0,i.signout({id:"(1)"},function(){return n.submitting=!1,t.location.href="/"})},n.manage=function(){return t.location.href="/admin/"},n.view=function(){return t.location.href="/"}}])